---
page_title: "Provider: redisacl"
description: |-
  
---

# redisacl Provider

The Redis ACL provider allows Terraform to manage Redis Access Control Lists (ACLs). This provider supports Redis 6.0+ ACL features including user management, permissions, and access controls.

## Example Usage

```terraform
# Basic Redis ACL User Management Example
# This example demonstrates basic user creation and management

terraform {
  required_providers {
    redisacl = {
      source  = "B3ns44d/redisacl"
      version = "1.0.1"
    }
  }
}

# Configure the provider for local Redis
provider "redisacl" {
  address  = "localhost:6379"
  username = "redis" # Change this to your Redis username
  password = "your-redis-password" # Change this to your Redis password
}

# Create a read-only user for applications
resource "redisacl_user" "readonly_app" {
  name      = "readonly-app"
  enabled   = true
  passwords = ["app-readonly-password"]

  # Allow access to application keys only
  keys = "~app:* ~cache:*"

  # Allow all pub/sub channels
  channels = "&*"

  # Only allow read operations
  commands = "+@read -@write -@dangerous"
}

# Create a write user for data ingestion
resource "redisacl_user" "write_app" {
  name      = "write-app"
  enabled   = true
  passwords = ["app-write-password"]

  # Allow access to specific key patterns
  keys = "~data:* ~temp:*"

  # Allow specific pub/sub channels
  channels = "&notifications:* &events:*"

  # Allow read and write, but not dangerous operations
  commands = "+@read +@write -@dangerous"
}

# Create an admin user with full access
resource "redisacl_user" "admin" {
  name      = "admin-user"
  enabled   = true
  passwords = ["secure-admin-password"]

  # Full access to all keys and channels
  keys     = "~*"
  channels = "&*"
  commands = "+@all"

  # Allow self-modification (needed for admin operations)
  allow_self_mutation = true
}

# Create a monitoring user with limited access
resource "redisacl_user" "monitoring" {
  name      = "monitoring-user"
  enabled   = true
  passwords = ["monitoring-password"]

  # No key access needed for monitoring
  keys = "~"

  # No pub/sub access needed
  channels = "&"

  # Only allow monitoring and info commands
  commands = "+ping +info +client +config|get +memory +latency +slowlog"
}

# Data source to read the default user
data "redisacl_user" "default" {
  name = "default"
}

# Data source to list all users
data "redisacl_users" "all" {}

# Outputs
output "default_user_info" {
  description = "Information about the default Redis user"
  value = {
    enabled  = data.redisacl_user.default.enabled
    keys     = data.redisacl_user.default.keys
    commands = data.redisacl_user.default.commands
  }
}

output "all_users" {
  description = "List of all Redis ACL users"
  value = [for user in data.redisacl_users.all.users : {
    name    = user.name
    enabled = user.enabled
  }]
}

output "created_users" {
  description = "Information about created users"
  value = {
    readonly_app = {
      name = redisacl_user.readonly_app.name
      keys = redisacl_user.readonly_app.keys
    }
    write_app = {
      name = redisacl_user.write_app.name
      keys = redisacl_user.write_app.keys
    }
    admin = {
      name = redisacl_user.admin.name
    }
    monitoring = {
      name = redisacl_user.monitoring.name
    }
  }
}
```

## Authentication

The provider supports multiple authentication methods:

### Basic Authentication
```terraform
provider "redisacl" {
  address  = "localhost:6379"
  username = "admin"
  password = "password"
}
```

### TLS Configuration
```terraform
provider "redisacl" {
  address  = "redis.example.com:6380"
  use_tls  = true
  username = "admin"
  password = "password"
  
  # Optional: Custom CA certificate
  tls_ca_cert = file("ca.pem")
  
  # Optional: Client certificate for mutual TLS
  tls_cert = file("client.pem")
  tls_key  = file("client-key.pem")
}
```

### Redis Cluster
```terraform
provider "redisacl" {
  cluster {
    addresses = [
      "node1.redis.example.com:6379",
      "node2.redis.example.com:6379",
      "node3.redis.example.com:6379"
    ]
    username = "admin"
    password = "password"
  }
}
```

### Redis Sentinel
```terraform
provider "redisacl" {
  sentinel {
    addresses = [
      "sentinel1.redis.example.com:26379",
      "sentinel2.redis.example.com:26379",
      "sentinel3.redis.example.com:26379"
    ]
    master_name = "mymaster"
    username    = "admin"
    password    = "password"
  }
}
```

> **⚠️ Important:** Redis does not automatically replicate ACL users to replica nodes. In Sentinel setups, when a failover occurs, the newly promoted master will not have the ACL users created by this provider. Consider using Redis Cluster or implementing ACL synchronization mechanisms for high-availability scenarios.

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `address` (String) The address of the Redis server.
- `cluster` (Attributes) Configuration for Redis Cluster. (see [below for nested schema](#nestedatt--cluster))
- `password` (String, Sensitive) The password for Redis authentication.
- `sentinel` (Attributes) Configuration for Redis Sentinel. (see [below for nested schema](#nestedatt--sentinel))
- `tls_ca_cert` (String, Sensitive) PEM-encoded CA certificate for TLS verification.
- `tls_cert` (String, Sensitive) PEM-encoded client certificate for mutual TLS.
- `tls_insecure_skip_verify` (Boolean) Disable TLS certificate verification (insecure, use only for testing).
- `tls_key` (String, Sensitive) PEM-encoded client private key for mutual TLS.
- `use_tls` (Boolean) Whether to use TLS for the connection.
- `username` (String) The username for Redis authentication.

<a id="nestedatt--cluster"></a>
### Nested Schema for `cluster`

Required:

- `addresses` (List of String) A list of cluster node addresses.

Optional:

- `password` (String, Sensitive) The password for cluster authentication.
- `username` (String) The username for cluster authentication.


<a id="nestedatt--sentinel"></a>
### Nested Schema for `sentinel`

Required:

- `addresses` (List of String) A list of Sentinel addresses.
- `master_name` (String) The name of the Sentinel master.

Optional:

- `password` (String, Sensitive) The password for Sentinel authentication.
- `username` (String) The username for Sentinel authentication.

## Environment Variables

The following environment variables can be used as defaults:

- `REDIS_ADDRESS` - Redis server address
- `REDIS_USERNAME` - Redis username
- `REDIS_PASSWORD` - Redis password
- `REDIS_USE_TLS` - Enable TLS (true/false)

## Requirements

- Redis 6.0 or later (ACL support required)
- Terraform 1.0 or later